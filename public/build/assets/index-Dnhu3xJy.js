import{j as e,r as g,u as T,H,L as _,b as o}from"./app-Cfw5N1hp.js";import{H as U}from"./heading-small-DwP-YN1l.js";import{c as b,S as E,a as B,b as I,B as f}from"./app-logo-icon-BweiERlG.js";import{C as M,a as V,b as $,c as z}from"./card-BxE2vReu.js";import{P as R,T as P,a as F,b as w,c as m,d as G,e as u,f as J}from"./table-Bkkdntf7.js";import{A as K}from"./app-sidebar-layout-DkUe-6Vs.js";import{L as O}from"./loader-circle-D4a5EMO-.js";/* empty css            */import"./index-Dkf1XcQA.js";import"./index-Y00ChMLq.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],W=b("ArrowDown",Q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Y=b("ArrowUpDown",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],q=b("ArrowUp",Z),ee=I("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function v({className:a,variant:s,asChild:c=!1,...d}){const n=c?E:"span";return e.jsx(n,{"data-slot":"badge",className:B(ee({variant:s}),a),...d})}const re=[{title:"ダッシュボード",href:route("dashboard")},{title:"ユーザー管理",href:route("users.index")}],p=({children:a,sort_key:s,queryParams:c})=>{const d=c?.sort||"id",n=c?.direction||"asc",l=d===s,h=l&&n==="asc"?"desc":"asc",x=l?n==="asc"?q:W:Y;return e.jsxs(_,{href:route("users.index",{sort:s,direction:h}),preserveState:!0,preserveScroll:!0,className:"flex items-center gap-2",children:[a,e.jsx(x,{className:`h-4 w-4 ${l?"text-primary":"text-muted-foreground"}`})]})};function xe({users:a,queryParams:s={}}){const[c,d]=g.useState(a.data),[n,l]=g.useState(a.next_page_url),[h,x]=g.useState(!1);g.useEffect(()=>{d(a.data),l(a.next_page_url)},[a]);const y=()=>{n&&(x(!0),o.get(n,{},{preserveState:!0,preserveScroll:!0,onSuccess:r=>{const j=r.props.users.data,A=r.props.users.next_page_url;d(L=>[...L,...j]),l(A),x(!1)},onError:()=>{x(!1)}}))},N=r=>{confirm(`ユーザー「${r.name}」を削除してもよろしいですか？この操作は取り消せません。`)&&o.delete(route("users.destroy",r.id),{preserveState:!1,onError:()=>{}})},k=r=>{switch(r){case"active":return e.jsx(v,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"アクティブ"});case"retired":return e.jsx(v,{variant:"secondary",children:"退職"});case"shared":return e.jsx(v,{variant:"default",children:"共有アカウント"});default:return e.jsx(v,{variant:"outline",children:r})}},S=T(),{permissions:i}=S.props;i?.user?.view||i?.is_system_admin;const C=i?.user?.create||i?.is_system_admin,t=i?.user?.update||i?.is_system_admin,D=i?.user?.delete||i?.is_system_admin;return e.jsxs(K,{breadcrumbs:re,children:[e.jsx(H,{title:"ユーザー管理"}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(U,{title:"ユーザー管理",description:"ユーザーの一覧・編集・削除を行う。"})}),e.jsxs(M,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between",children:[e.jsx($,{children:"ユーザー一覧"}),C&&e.jsx(_,{href:route("users.create"),children:e.jsxs(f,{children:[e.jsx(R,{className:"mr-0 h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"ユーザー新規作成"})]})})]}),e.jsxs(z,{children:[e.jsxs(P,{children:[e.jsx(F,{children:e.jsxs(w,{children:[e.jsx(m,{children:e.jsx(p,{sort_key:"id",queryParams:s,children:"ID"})}),e.jsx(m,{children:e.jsx(p,{sort_key:"name",queryParams:s,children:"名前"})}),e.jsx(m,{children:e.jsx(p,{sort_key:"email",queryParams:s,children:"LINE名"})}),e.jsx(m,{children:e.jsx(p,{sort_key:"status",queryParams:s,children:"ステータス"})}),e.jsx(m,{children:e.jsx(p,{sort_key:"created_at",queryParams:s,children:"登録日"})})]})}),e.jsx(G,{children:c.map(r=>e.jsxs(w,{className:"hover:bg-gray-50",children:[e.jsx(u,{className:t?"cursor-pointer":"",onClick:()=>t&&o.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:r.id}),e.jsx(u,{className:t?"cursor-pointer":"",onClick:()=>t&&o.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:r.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.roles&&r.roles.length>0?r.roles.map(j=>j.name).join(", "):e.jsx("span",{className:"text-xs",children:"未登録"})})]})}),e.jsx(u,{className:t?"cursor-pointer":"",onClick:()=>t&&o.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:r.line_name}),e.jsx(u,{className:t?"cursor-pointer":"",onClick:()=>t&&o.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:k(r.status)}),e.jsx(u,{className:t?"cursor-pointer":"",onClick:()=>t&&o.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:new Date(r.created_at).toLocaleDateString()}),e.jsx(u,{className:"text-right",children:D&&e.jsxs(f,{variant:"destructive",size:"sm",onClick:()=>N(r),children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," 削除"]})})]},r.id))})]}),n&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(f,{onClick:y,disabled:h,variant:"outline",children:[h&&e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),"もっとみる"]})})]})]})]})]})}export{xe as default};
