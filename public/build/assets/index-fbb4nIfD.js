import{j as e,r as m,u as D,H as A,L as w,b as n}from"./app-fAu9F8Qa.js";import{H as L}from"./heading-small-CVYa3Qll.js";import{c as f,S as T,a as H,b as E,B as v}from"./app-logo-icon-BgJucqo0.js";import{C as B,a as I,b as M,c as U}from"./card-Cgnbhpij.js";import{P as V,T as $,a as P,b,c as u,d as z,e as d,f as R}from"./table-CMzM7W9g.js";import{A as F}from"./app-sidebar-layout-DOACWoPa.js";import{L as G}from"./loader-circle-BRcyiT7P.js";/* empty css            */import"./index-CXCml9p6.js";import"./index-46EnhBWJ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],K=f("ArrowDown",J);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Q=f("ArrowUpDown",O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],X=f("ArrowUp",W),Y=E("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:t,variant:s,asChild:o=!1,...i}){const a=o?T:"span";return e.jsx(a,{"data-slot":"badge",className:H(Y({variant:s}),t),...i})}const Z=[{title:"ダッシュボード",href:route("dashboard")},{title:"ユーザー管理",href:route("users.index")}],x=({children:t,sort_key:s,queryParams:o})=>{const i=o?.sort||"id",a=o?.direction||"asc",c=i===s,p=c&&a==="asc"?"desc":"asc",l=c?a==="asc"?X:K:Q;return e.jsxs(w,{href:route("users.index",{sort:s,direction:p}),preserveState:!0,preserveScroll:!0,className:"flex items-center gap-2",children:[t,e.jsx(l,{className:`h-4 w-4 ${c?"text-primary":"text-muted-foreground"}`})]})};function ue({users:t,queryParams:s={}}){const[o,i]=m.useState(t.data),[a,c]=m.useState(t.next_page_url),[p,l]=m.useState(!1);m.useEffect(()=>{i(t.data),c(t.next_page_url)},[t]);const N=()=>{a&&(l(!0),n.get(a,{},{preserveState:!0,preserveScroll:!0,onSuccess:r=>{const j=r.props.users.data,_=r.props.users.next_page_url;i(C=>[...C,...j]),c(_),l(!1)},onError:()=>{l(!1)}}))},k=r=>{confirm(`ユーザー「${r.name}」を削除してもよろしいですか？この操作は取り消せません。`)&&n.delete(route("users.destroy",r.id),{preserveState:!1,onError:()=>{}})},y=r=>{switch(r){case"active":return e.jsx(g,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"アクティブ"});case"retired":return e.jsx(g,{variant:"secondary",children:"退職"});case"shared":return e.jsx(g,{variant:"default",children:"共有アカウント"});default:return e.jsx(g,{variant:"outline",children:r})}},S=D().props?.auth?.permissions??[],h=r=>S.includes(r);return e.jsxs(F,{breadcrumbs:Z,children:[e.jsx(A,{title:"ユーザー管理"}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(L,{title:"ユーザー管理",description:"ユーザーの一覧・編集・削除を行う。"})}),e.jsxs(B,{children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsx(M,{children:"ユーザー一覧"}),h("user.create")&&e.jsx(w,{href:route("users.create"),children:e.jsxs(v,{children:[e.jsx(V,{className:"mr-0 h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"ユーザー新規作成"})]})})]}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(P,{children:e.jsxs(b,{children:[e.jsx(u,{children:e.jsx(x,{sort_key:"id",queryParams:s,children:"ID"})}),e.jsx(u,{children:e.jsx(x,{sort_key:"name",queryParams:s,children:"名前"})}),e.jsx(u,{children:e.jsx(x,{sort_key:"email",queryParams:s,children:"LINE名"})}),e.jsx(u,{children:e.jsx(x,{sort_key:"status",queryParams:s,children:"ステータス"})}),e.jsx(u,{children:e.jsx(x,{sort_key:"created_at",queryParams:s,children:"登録日"})})]})}),e.jsx(z,{children:o.map(r=>e.jsxs(b,{className:"hover:bg-gray-50",children:[e.jsx(d,{className:h("user.update")?"cursor-pointer":"",onClick:()=>h("user.update")&&n.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:r.id}),e.jsx(d,{className:"cursor-pointer",onClick:()=>n.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:r.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r.roles&&r.roles.length>0?r.roles.map(j=>j.name).join(", "):e.jsx("span",{className:"text-xs",children:"未登録"})})]})}),e.jsx(d,{className:"cursor-pointer",onClick:()=>n.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:r.line_name}),e.jsx(d,{className:"cursor-pointer",onClick:()=>n.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:y(r.status)}),e.jsx(d,{className:"cursor-pointer",onClick:()=>n.get(route("users.edit",r.id),{},{preserveScroll:!0}),children:new Date(r.created_at).toLocaleDateString()}),e.jsx(d,{className:"text-right",children:h("user.delete")&&e.jsxs(v,{variant:"destructive",size:"sm",onClick:()=>k(r),children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," 削除"]})})]},r.id))})]}),a&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(v,{onClick:N,disabled:p,variant:"outline",children:[p&&e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"もっとみる"]})})]})]})]})]})}export{ue as default};
